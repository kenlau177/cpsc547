# About
Ken Lau  
Monday, December 01, 2014  

### Introduction
This R shiny app presents a new method to visualize the ensemble of trees generated by a random forest model. Random forests have become a very popular data mining algorithm due to high accuracy predictions and ability to handle large amounts of input variables. However, this ensemble method is difficult to interpret. It is inefficient to analyze every tree individually. Moreover, the stochastic properties entailing individual trees provides minimal intuition as to why the overall model gives accurate predictions. 

### Data
Currently, this app only handles the modulation signal data as part of my MSc project. It should be easily extensible to other classification data set in the near future. There are 6 modulations (or classes) in total. These modulations include OOK, BPSK, OQPSK, BFSK, BFSK at higher carrier frequency, and BFSK at random carrier frequency. There are currently 5 quantitative features, and a total of 600 observation samples.

### Measure of Diversity on Ensembles
This app uses methods illustrated in [@leonawicz2014rfShiny] such as variable importance, proximity, and partial dependence. In addition, a measure of diversity amongst the ensemble of trees is derived to determine trees that are more correlated to each other.

Hamann similarity measure is suggested in [@gatnar2005diversity] to evaluate the diversity of all possible component classifier pairs. It is required to compute the number of signals that predict the same class as shown on the left table below, and the number of signals that predict different classes as shown on the left table below. 

<table class='container'><tr>
<td>
<h5>Predicted Same Class</h5>
<table border="1">
<tr>
<th></th>
<th> Correct </th>
<th> Incorrect </th>
</tr>
<tr>
<td>Correct</td>
<td> a1 </td>
<td> 0 </td>
</tr>
<td>Incorrect</td>
<td> 0 </td>
<td> d1 </td>
</tr>
</table>
</td>
<td>
<h5>Predicted Different Class</h5>
<table border="1">
<tr>
<th></th>
<th> Correct </th>
<th> Incorrect </th>
</tr>
<tr>
<td>Correct</td>
<td> 0 </td>
<td> b2 </td>
</tr>
<td>Incorrect</td>
<td> c2 </td>
<td> d2 </td>
</tr>
</table>
</td>
</tr></table>

The hamann similarity measure is slightly modified to incorporate more than two classes. The measure is defined as
\[H=\frac{(a_{1}+d_{1})-(b_{2}+c_{2}+d_{3})}{a_{1}+d_{1}+b_{2}+c_{2}+d_{2}}\]
Hamann similarity is computed pairwise for each tree against all the remaining trees. The trees are then ranked based on hamann similarity. 

### Components of the App
The side panel includes a check box to glimpse the head of the data set. Moreover a numeric input box is provided to tune the number of trees to fit the random forest. The minimal number of trees is 100. An action button is provided below the numeric input box to fit the random forest model. By pressing the button, it also computes the hamann similiarty for each tree in the random forest model, and a histogram is displayed on the top right of the main panel. Moreover, a new slider appears below the fit action button allowing the user to choose the range of trees to filter based on hamann similarity.

The main panel contains the variable importance, proximity, and partial dependence plots. Initially these plots are based on all the trees generated by the random forest. However, the user has the option to filter the trees by  specifying the hamann similarity range. Only the trees falling within this range are used in constructing the plots. 







### Bibliography
